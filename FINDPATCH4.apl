    ∇ ZZ←FINDPATCH4 XX;I;J[1]   ⍝Id all patches in ⍵ using neighbor 4-neighbor rule[2]   ⍝Uses global KK (adjacent cells for 4- or 8-neighbor rule)[3]   ⍝Ignores zero-valued cells[4]   [5]    ZZ←(XX≠0)×(⍴XX)⍴¯1[6]    I←0[7]   ⍝ 0 60 1 20 ⎕WPUT 28[8]   L1:I←I+1                          ⍝Patch id[9]    J←1+(1 0+⍴XX)⊤¯1+(,ZZ)⍳¯1        ⍝   Next new patch[10]   ⍝0 60 1 20 ⎕WPUT 20↑(4 0⍕J),' : ',4 0⍕I[11]   →(J[1]>1↑⍴XX)/0                  ⍝   All done?[12]   (I,XX[J[1];J[2]]) FILLPATCH J[13]   →L1    ∇