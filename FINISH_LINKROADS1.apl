    ∇ FINISH_LINKROADS1;pathL;A;B;H;Q;T;head[1]   ⍝Finish off Critical Linkages I roads results WITHOUT UNCERTAINTY RUNS[2]   ⍝   1. Build best-case from standard and uncertainty runs[3]   ⍝   2. Split out linkage groups[4]   ⍝   3. Create grids[5]   ⍝After running this, run finish_linkages.aml to create final dataset[6]   ⍝B. Compton, 26 Jan 2012[7]   [8]   [9]   [10]   SETPATHS[11]   INIT[12]  ⍝ pathL←path,'more\linkages\'[13]   pathL←'W:\LCC\GISdata\DataFinal\CtCtriver\caps\results_rt11\'[14]  [15]  ⍝1. Build best-case table[16]  [17]   'A' LOAD pathL PATH 'link_roads.txt'[18]  ⍝ 'B' LOAD pathL PATH 'link_roads_u.txt'[19]   A H ← A[20]  ⍝ B←1⊃B[21]   Q←(Q←((Q⍳Q)=⍳⍴Q)/Q←100↑Q)⍳Q←A[;H COL 'linkgroup'][22]   A←A[⍋A[;H COL 'x-coord y-coord'],Q;][23]  ⍝ Q←(Q←((Q⍳Q)=⍳⍴Q)/Q←100↑Q)⍳Q←B[;H COL 'linkgroup'][24]  ⍝ B←B[⍋B[;H COL 'x-coord y-coord'],Q;][25]  ⍝ ⍎(~^/,A[;H COL 'x-coord y-coord']=B[;H COL 'x-coord y-coord'])/'÷0 link_roads and link_roads_u don''t match!'[26]  ⍝ Q←A[;H COL 'delta']>B[;H COL 'delta']   ⍝Where best estimate > uncertainty[27]  ⍝ B[Q/⍳1↑⍴B;]←Q⌿A[28]  ⍝ ⎕←(⍕+/Q),' cases had best case > uncertainty.'[29]  ⍝ head←1↓⎕TCHT MTOV H[30]  ⍝ B TMATOUT T←pathL PATH 'link_roads_bc.txt'[31]  ⍝ ⎕←T,' written.'[32]  [33]  ⍝2. Split into groups[34]  [35]  'linkgroup' SPLITTABLE pathL PATH 'link_roads.txt'[36]  ⍝'linkgroup' SPLITTABLE pathL PATH 'link_roads_bc.txt'[37]  [38]  [39]  ⍝3. Create grids[40]  [41]  'link_roads_forest' LINKROADS_GRIDS 'roads_fo_g'[42]  'link_roads_wetaq' LINKROADS_GRIDS 'roads_wet_g'[43]  'link_roads_other' LINKROADS_GRIDS 'roads_oth_g'[44]  'link_roads_all' LINKROADS_GRIDS 'roads_all_g'[45]  [46]  ⍝'link_roads_bc_forest' LINKROADS_GRIDS 'roads_fobc_g'[47]  ⍝'link_roads_bc_wetaq' LINKROADS_GRIDS 'roads_wetbc_g'[48]  ⍝'link_roads_bc_other' LINKROADS_GRIDS 'roads_othbc_g'[49]  ⍝'link_roads_bc_all' LINKROADS_GRIDS 'roads_allbc_g'[50]  [51]  ⎕←'FINISH_LINKROADS is done.  Now &r finish_linkages.aml'    ∇