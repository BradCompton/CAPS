    ∇ B SCRIPTSETUP M[1]   ⍝Do setup for SCRIPT function ⍵, buffer ⍺.  This is just shared initial code; everything is GLOBAL[2]   ⍝B. Compton, 26 Sep 2014[3]   ⍝29 Sep 2014: can pass in buffer in ⍺[4]   [5]   [6]   [7]    ⍎(0=⎕NC'B')/'B←0'[8]    ⎕←'Running ',M ⋄ FLUSH[9]    framework←'caps'[10]   INIT[11]   loop←test←noread←0 ⋄ grids←0 0⍴''              ⍝Silly junk for BLOCK, etc.[12]   BLOCK (2⍴2⊃R),B[13]   SETTILE[14]  [15]   buffer←B                                       ⍝Set buffer[16]   tilemapinclude←0[17]   skiptilemap←0                                  ⍝Don't let DEBUG sabotage this[18]   altmask←(1+~0∊⍴mask)⊃(,'*') (mask←(⍴G)⊃G)      ⍝Need to use altmask to override standard mask in inputs.par.  Uses '*' if empty.[19]   E←TILEMAP '' (2⊃R) 0 0                         ⍝Get tilemap, building it if necessary. This will only help if there's mask grid.[20]  [21]   dot←⍴⍞←'   Running for ',(⍕+/E),' tiles' ⋄ FLUSH[22]   X←,¯1↓G[23]   N←0    ∇