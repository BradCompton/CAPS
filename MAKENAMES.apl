    ∇ Z←N MAKENAMES S;A;I;G;T;M;J;C[1]   ⍝Create file names from existing result, settings, or source names ⍺ and scenario names ⍵[2]   ⍝If scenario ends in '\', prepend it to ⍺[3]   ⍝If scenario begins in '-', postpend it to ⍺[4]   ⍝Otherwise, replace ⍺ with scenario[5]   ⍝If one or more grid names (space-separated) are included in brackets, scenario only applies to these grids,[6]   ⍝e.g., [d8accum flow]-_s1t10 would do this to grids d8accum, flow, and slope: d8accum_s1t10, flow_s1t10, slope.[7]   ⍝If futuregrids exists, grids with that name go into futurepath (modified for SCENARIODELTAS with searise and climate for DSL)[8]   ⍝   future grids don't get prefix/postfix[9]   ⍝B. Compton, 20 Jan 2009 [Obama inaugurated as president!][10]  ⍝14 Sep 2011: Add grid names in brackets[11]  ⍝21 Apr 2017: futuregrids are in futurepath[12]  [13]  [14]  [15]   Z←(⍴S)⍴⊂''[16]   →(0∊⍴N)/0                          ⍝Bail if no grid names[17]  [18]   Z←N[19]   ⍎(2>≡N)/'N←,⊂N'                    ⍝Enclose ⍺ if necessary[20]   →(0∊⍴S)/0                          ⍝If there are scenario names,[21]   G←TOLOWER¨FRDBL¨¨↓¨MATRIFY¨1↓¨¯1↓¨(T←(⊃,/'['=1↑¨S)×S⍳¨']')↑¨S  ⍝   Pull out bracketed names[22]   S←T↓¨S[23]   A←⊃,/(0=⍴¨S)+('\'=¯1↑¨S)+2×'-'=1↑¨S⍝   1 if prepend, 2 if postpend, 0 if replace[24]   S←(A=2)↓¨S                         ⍝Drop leading dash (use two if you want one)[25]   Z←(1↑⍴S)⍴0[26]   I←0[27]  L1:→((1↑⍴S)<I←I+1)/0                ⍝For each scenario,[28]   Z[I]←⊂M←N[29]   J←(((TOLOWER¨STRIP¨N)∊I⊃G)∨0∊⍴I⊃G)/⍳⍴M     ⍝   Grids subject to change[30]   →(0∊⍴J)/L1[31]  [32]   :if 0≠⎕NC 'futuregrids'            ⍝   if there are any futuregrids, they go into futurepath[33]      C←(TOUPPER STRIP¨N[J])∊FRDBL¨↓MATRIFY TOUPPER futuregrids[34]      M[C/J]←(⊂futurepath) PATH¨C/N[J][35]   :else[36]      C←(⍴N[J])⍴0[37]   :end[38]  [39]   M[(~C)/J]←((A[I]=1)/¨S[I]),¨((A[I]≠0)/¨N[(~C)/J]),¨(A[I]≠1)/¨S[I][40]   Z[I]←⊂M[41]   →L1    ∇