    ∇ S DISTANCETEST N;Z;I;settings;Q;W;P;J;fileptr;test;loop;block;F;T;B;sd;sdt;head[1]   ⍝Sample ecological distances between pairs of ⍵ points using various groups of settings variables[2]   ⍝If ⍵<0, read random points from xy.txt, created by settings.pc()[3]   ⍝Globals:[4]   ⍝   pathG - grid path, to landcover and all settings grids[5]   ⍝   pathI - model path, to settings tables[6]   ⍝See DISTANCETEST2 to use data from elsewhere (e.g. JMP)[7]   ⍝B. Compton, 24 Apr 2008[8]   ⍝18 Feb 2011: Always set anthro settings to zero for focal cell[9]   ⍝4 Nov 2011: use ECODIST and new SETTINGS[10]  [11]  [12]  [13]   ⍎(0=⎕NC'S')/'S←''settings-pc settings-raw'''[14]   fileptr←test←loop←block←0[15]   S←MATRIFY S[16]   F←FROMARC pathG PATH 'land'[17]  [18]   →(N>0)/L4                                  ⍝If using random points from file,[19]   P←0 MATIN pathG PATH 'xy.txt'[20]   P←↑FINDCELL¨↓P[21]   →L5                                        ⍝Else, make ⍵ random points[22]  [23]  L4:P←0 2⍴0[24]  L0:P←P⍪?(((N+1)-1↑⍴P),2)⍴2↑WINDOW[2 1]      ⍝   get ⍵+1 random points[25]   P←(WINDOW[6]≠F SCATI P)⌿P                  ⍝      drop missing values[26]   →((1↑⍴P)<N+1)/L0                           ⍝      get more if need be[27]  [28]  L5:P←(B←¯9999≠T←F SCATI P)⌿P[29]   T←B/T[30]   N←¯1+1↑⍴P[31]   Z←(N,2+1↑⍴S)⍴0[32]   Z[;1]←¯1↓T[33]   Z[;2]←1↓T[34]  [35]   I←0[36]  L1:→((1↑⍴S)<I←I+1)/L3               ⍝For each group of settings variables,[37]   settings←TABLE FRDBL S[I;][38]   sd sdt ← SETTINGS 'settings' 'anthro1 anthro2' 'dist' ⍝Get ecological settings and tables for distance[39]  [40]   J←0[41]  L2:→(N<J←J+1)/L1                    ⍝   For each point,[42]   Z[J;I+2]←(sdt[;2]×sd[;P[J;1];P[J;2]]) ECODIST sd[;P[J+1;1];P[J+1;2]]      ⍝      get distance to next point[43]   →L2[44]  [45]  L3:Z[;1 2]←(>/Z[;1 2])⌽Z[;1 2]      ⍝Sort cover types[46]   head←1↓⎕TCHT MTOV 'from' OVER 'to' OVER S[47]   Z TMATOUT pathG PATH 'dist-test.txt'    ∇