    ∇ F GENERATELINES X;B;I;Q;Z;T;J[1]   ⍝Write file ⍺ as input to Arc GENERATE command to create line coverage from lines ⍵[2]   ⍝B. Compton, 20 Jul 2010[3]   ⍝3 Aug 2010: serious speed-ups.  Limitation: lines longer than 1000 segments get split.[4]   ⍝16 Dec 2016: don't fail on empty input[5]   [6]   [7]   [8]    '' NWRITE F[9]    →(0∊⍴X)/L2                     ⍝If no lines, write end and exit[10]   I←J←0[11]   B←^/X[;3 4]=1⊖X[;1 2]          ⍝Get segments that make up a line[12]  L1:BREAKCHECK[13]   Q←X[J+⍳T←1++/^\1000↑J↓B;][14]   Z←(DEB⍕I←I+1),⎕TCNL[15]   Q←Q[;1 2]⍪Q[1↑⍴Q;3 4][16]   Z←Z,1↓MTOV (DEB⍕Q[;,1]),',',(DEB⍕Q[;,2])[17]   Z←Z,⎕TCNL,'end'[18]   Z NAPPEND F[19]   →((1↑⍴X)>J←J+T)/L1[20]  L2:(⎕TCNL,'end') NAPPEND F    ∇