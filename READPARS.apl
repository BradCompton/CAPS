    ∇ ∆F READPARS ∆M;∆X;∆I;∆T;∆Q;fn;⎕ELX;∆J;null;tablepath;∆S;no;yes;Yes;YES;No;NO[1]   ⍝Read & set parameters for metric ⍵ from current CAPS parameter file; fail silently if ⍺[2]   ⍝Sets variables and returns global set with list[3]   ⍝Parameters are in global pars[4]   ⍝Adds new parameters to global set to make them easy to get rid of[5]   ⍝If override_pars is present, use its values to replace those in parameters.par (can use EXTRACTPARS to get pars for a metric)[6]   ⍝B. Compton, 13 Nov 2007[7]   ⍝10 Sep 2010: override_pars are set on top of those in parameters.par[8]   ⍝28 Jun 2011: Add silent fail[9]   ⍝11-12 Aug 2011: don't localize pathI; use tablepath instead[10]  ⍝11 Apr 2012: use PULLPARS to capture disjunct occurances of [metric][11]  ⍝24 Aug 2012: Use variables, not literals for yes and no[12]  [13]  [14]  [15]   ⍎(0=⎕NC'∆F')/'∆F←0'[16]   BREAKCHECK[17]   null←⍳0[18]   NO←No←no←~YES←Yes←yes←1[19]   tablepath←pathM                        ⍝Default for TABLE is metric parameters path[20]   ∆J←0[21]   ∆X←VTOM ('.',⎕TCHT,'.') TEXTREPL ⎕TCNL,pars[22]   →(0=⎕NC'override_pars')/L1             ⍝If override_pars,[23]   ∆X←∆X OVER VTOM ⎕TCNL,override_pars    ⍝   Allow function to not exist in parameters.par[24]  L1:∆S ∆X←∆M PULLPARS ∆X[25]   →(∆J^~∆S)/0                            ⍝Don't need to find this metric in override_pars...just exit if it isn't there[26]   →(~0∊⍴∆Q←(~∆S)/'Metric [',(fn←∆M),'] not in parameters file')/L7[27]   ⍎(0=⎕NC'set')/'set←0 0⍴'''''[28]   →('caps'≡TOLOWER fn)/L2                                                ⍝If we're in a metric and not setting general options,[29]   set←set OVER FRDBL LJUST (⍴∆X)↑(+/^\∆X≠'=')⌽((⍴∆X)⍴' '),∆X             ⍝   Global 'set' gets names of variables set[30]  L2:∆X←VTOM REPLACESYM MTOV ∆X[31]   ⎕ELX←'∆Q←''Error in parameter: "'',∆T,''" (Syntax error or bad values?)'' ⋄ →L5'[32]   ∆I←0[33]  L3:→((1↑⍴∆X)<∆I←∆I+1)/L4            ⍝For each parameter,[34]   ∆T←∆X[∆I;][35]   ∆T←FRDBL (^\∆T≠';')/∆T             ⍝   Strip comments[36]   →(^/∆T=' ')/L3                     ⍝   Comment[37]   ⍎∆T[38]   →L3[39]  [40]  L4:→(∆J∨0=⎕NC'override_pars')/0     ⍝If override_pars is set,[41]   →(0∊⍴override_pars)/0[42]   ∆X←VTOM ⎕TCNL,override_pars[43]   ∆J←1[44]   →L1[45]  [46]  L5:→warn/L6                         ⍝If hard error,[47]  L7:→∆F/0                            ⍝If silent fail, just return[48]   ⎕ERROR ∆Q[49]  L6:∆Q WARN ' '                      ⍝Else, warn and continue[50]   →L3    ∇