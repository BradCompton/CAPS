    ∇ ∆GRIDINIT S;Q;Z;err;A;P;M;L;firstfail[1]   ⍝Initialize Edi's gridio functions server and port ⍵[2]   ⍝   ⍵[1]    server ('' for local grid server)[3]   ⍝   ⍵[2]    port (not needed for local server)[4]   ⍝   ⍵[3]    server log (optional; if excluded, use global serverlog)[5]   ⍝B. Compton, 14 Jan 2009; E. Ene, 3 Jan 2009[6]   ⍝30 Apr 2009: allow reinitializing (won't work when in server mode!)[7]   ⍝12 Aug 2010: port is a variable in parameter file now (probably need to open firewall to new ports!)[8]   ⍝2 May 2011: set global gridwait for task manager[9]   ⍝5 Sep 2013: change to ∆GRIDINIT from GRIDINIT; port is now a required parameter with no default; always call CLEANUP first[10]  ⍝10 Sep 2013: change arguments to conform to new GRIDINIT[11]  ⍝13 Nov 2013: add grid server recovery[12]  ⍝31 Jan 2014: increment gridinitcount so we can refresh if it exceeds maxlocalgridinit so we don't run out of memory[13]  ⍝25 May 2017: somehow I added a line to set E←0 without localizing it or doing anything with it...must have been a ghost-paste[14]  [15]  [16]  [17]   ⍎(0=⎕NC'S')/'S←'''''[18]   ⍎(S≡'')/'S←'''' 0'[19]   S P L ← 3↑S,0,(3<⍴,S)/serverlog    ⍝Server and port[20]   M←1+0∊⍴S                           ⍝Mode: 1 = remote, 2 = local[21]   :if M=2                            ⍝If in local mode, increment gridinitcount[22]      ⍎(0=⎕NC'gridinitcount')/'gridinitcount←0'[23]      gridinitcount←gridinitcount+1[24]  ⍝    ⎕←⎕TCNL,'→→→ gridinitcount = ',⍕gridinitcount ⋄ FLUSH[25]   :end[26]  [27]   →(aplc=1)/0                        ⍝If C version,[28]   →(3=⎕NC'GRIDINITc')/L1             ⍝   If not loaded,[29]   Q←⎕EX 'GRIDINITc'[30]   ⎕ERROR REPORTC 'DLL I4← CAPS_LIB.gridinit(I4,*C1,I4,I4)' ⎕NA 'GRIDINITc'[31]  ⍝⎕←'CAPS_LIB.gridinit loaded.'[32]  [33]  L1:A←⎕AI[2][34]   ∆CLEANUP[35]  L3:err Z←GRIDINITc M (S,⎕TCNUL) P L[36]   →(RECOVERY err)/L3                 ⍝Wait for crashed grid servers to recover[37]   →(err≠¯623)/L2                     ⍝If grid server already initialized,[38]   ∆CLEANUP                           ⍝  clean up and try again[39]  ⍝ ⎕←'---> reinitializing grid server'[40]   err Z←GRIDINITc M (S,⎕TCNUL) P L[41]  L2:GRIDWAIT A[42]   ⎕ERROR REPORTC err    ∇