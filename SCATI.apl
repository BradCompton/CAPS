    ∇ Z←X SCATI I;Q;R;C;J;err[1]   ⍝Do scattered indexing. ⍺[ ⍵[;1] ; [⍵;2] ][2]   ⍝Runs APL version if aplc=1, or C version if aplc=2[3]   ⍝B. Compton/E. Ene, 7 Oct 2010[4]   [5]   [6]    →(2=⍴⍴X)/L1                    ⍝Check inputs only if necessary[7]    X←(2↑(⍴X),1 1)⍴X               ⍝Inputs must be matrices[8]   L1:→((2=⍴⍴I)^2=¯1↑⍴I)/L2[9]    I←(¯2↑1 1,⍴I)⍴I[10]   I←((1↑⍴I),2)↑I,1[11]  L2:Z←⍳0[12]   →(0∊⍴I)/0[13]  [14]   →(aplc=1)/L6                   ⍝If C version,[15]   →(3=⎕NC'SCATIc')/L3            ⍝   If not loaded,[16]   Q←⎕EX 'SCATIc SCATI_Ic'[17]   ⎕ERROR REPORTC 'DLL I4← CAPS_LIB.sparseget_dbl(I4,I4,I4,*F8,*I4,*F8←)' ⎕NA 'SCATIc'[18]   ⎕ERROR REPORTC 'DLL I4← CAPS_LIB.sparseget_int(I4,I4,I4,*I4,*I4,*I4←)' ⎕NA 'SCATI_Ic'[19]  [20]  [21]  L3:R C ← ⍴X[22]   Z←(J←1↑⍴I)⍴1↑0⍴X[23]   →(645=⎕DR X)/L4                ⍝If matrix is integer,[24]   err Z←SCATI_Ic R C J X I Z[25]   →L5[26]  [27]  L4:err Z←SCATIc R C J X I Z     ⍝Else, floating point[28]  L5:⎕ERROR REPORTC err[29]   →0[30]  [31]  L6:Z←,X                         ⍝Else, APL version[32]   Z←Z[I[;2]+(I[;1]-1)×¯1↑⍴X]    ∇