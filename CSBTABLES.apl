    ∇ CSBTABLES;fn;warn;pars;X;H;I;head;dams;notracks;traintracks;roads;crossings;height[1]   ⍝Make text files for CAPS Scenario Builder for crossings, dams, and tidal restrictions[2]   ⍝B. Compton, 3-4 Oct 2011[3]   [4]   [5]   [6]    SETPATHS[7]    pars←NREAD pathI PATH 'parameters.par'[8]    READPARS 'barriers'[9]    warn←0[10]   fn←'csbtables'[11]  [12]   X←TABLE pathT PATH 'crossings.txt'[13]   H←',' MATRIFY head[14]   H←H[I←H COL 'x-coord y-coord aquatic terrestrial surveyed';][15]   X←X[;I][16]   X←(X[;I[1]]≠0)⌿X               ⍝Drop 0,0 rows[17]   H←'x_coord' OVER 'y_coord' OVER 2 0↓H[18]   head←1↓⎕TCHT MTOV H[19]   X TMATOUT pathS PATH 'crossingshape.txt'[20]  [21]  [22]  [23]   X←TABLE pathT PATH 'dampoints.txt'[24]   H←',' MATRIFY head[25]   H←H[I←H COL 'x-coord y-coord dam river damheight';][26]   X←X[;I][27]   X←(X[;I[1]]≠0)⌿X               ⍝Drop 0,0 rows[28]  [29]  [30]   H←H OVER 'aquatic'             ⍝Transform to aquatic crossing score[31]   height←X[;H COL 'damheight'][32]   X←X,4 ROUND 1-(⍎dams)*.5[33]  [34]   H←'x_coord' OVER 'y_coord' OVER 2 0↓H[35]   head←1↓⎕TCHT MTOV H[36]   X TMATOUT pathS PATH 'damshape.txt'[37]  [38]  [39]  [40]   X←TABLE pathT PATH 'trpoints.txt'[41]   H←',' MATRIFY head[42]   H←H[I←H COL 'x.coord y.coord tr surveyed site_name';][43]   X←X[;I][44]   X←(X[;I[1]]≠0)⌿X               ⍝Drop 0,0 rows[45]   H←'x_coord' OVER 'y_coord' OVER 2 0↓H[46]   head←1↓⎕TCHT MTOV H[47]   X TMATOUT pathS PATH 'trshape.txt'[48]  [49]  [50]  [51]   ⎕←''[52]   ⎕←'Now, in ArcView, make the following shapefiles:'[53]   ⎕←'   ',pathS,'crossingshape.txt → ',pathS,'crossings.shp'[54]   ⎕←'   ',pathS,'damshape.txt → ',pathS,'dams.shp'[55]   ⎕←'   ',pathS,'trshape.txt → ',pathS,'tr.shp'[56]   ⎕←''    ∇