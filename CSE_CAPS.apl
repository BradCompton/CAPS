    ∇ J CSE_CAPS P;warn;warnings;metrics;path;fn;pars;notemp;logfile;F;override_pars;pathI;pathM;pathP;pathG;pathR;pathW;pathA;pathE;pathD;pathS;pathT;pathU;pathN;pathF;N;workspace;Q;M[1]   ⍝Launch CAPS for CAPS Scenario Engine, ⍺[1]th scenario ⍵; project #⍺[2][2]   ⍝Global:[3]   ⍝   cseproject     path to projet[4]   ⍝B. Compton, 9-10 Jul and 21 Aug 2012[5]   ⍝3 May 2013: Call POST to do MIXMETRICS[6]   ⍝7 Jun 2013: project name revisions[7]   ⍝2 Jan 2014: work with new INIT scheme[8]   [9]   [10]  [11]   →reportonly/0[12]   path←P[13]   INIT     ⍝When reading CAPS options, they should come from the CSE version of parameters.par[14]  [15]   notemp←1                       ⍝Don't create temporary files for model & run--directories are already dedicated to this run[16]   MAKEDIR pathP,'temp\'[17]  [18]   NDROP F←cseproject,'finish',⍕J[1][19]  [20]   N←'CSE(',(⍕J[2]),'-',(⍕J[1]),'):CAPS'[21]   M←'CSE:CAPS ',(STRIP ¯1↓cseproject),' ',⍕J[1][22]   override_pars←('.|.',⎕TCNL) TEXTREPL '[caps]|project = ''',N,'''|comment = ''',M,'''|finish = ''SINK FILECREATE ''''',F,'''''''|post = 1|[post]|mixmetrics = 1|mixonly = 1'[23]  [24]   onerror←'debug'[25]   (pathP PATH 'caps.log') LOG '--- Starting run of CAPS, ',NOW,' ---'[26]   CAPSRUN[27]   CSE_INIT                       ⍝Reinitialize grid server, because CAPS mucks with it    ∇