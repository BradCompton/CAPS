    ∇ A BOXTRAFFIC S;B;R;Z;I;X;buffer;Y;Q;J;K;L;D;T;D50;DS;maxtraffic;DY;tirewidth;turtlelength;turtlevelocity[1]   ⍝Road traffic mortality metric for box turtles (Terrapene carolina)[2]   ⍝See Box turtle road mortality estimates.doc for details[3]   ⍝Runs for all cells, regardless of landcover[4]   ⍝⍺ = (raw traffic rate grid) () (result grid) (buffer)[5]   ⍝Paramters:[6]   ⍝   D50, DS, DY     logistic parameters[7]   ⍝   tirewidth       width of tires (m)[8]   ⍝   turtlelength    length of turtle (m)[9]   ⍝   turtlevelocity  velocity of turtle (m/s)[10]  ⍝B. Compton, 15-21 Feb 2010, from TRAFFIC[11]  ⍝4 Oct 2010: left behind by landcover revolution; would need to update to use INCLUDE, etc.[12]  [13]  [14]   READPARS ME[15]   buffer←B←4⊃A[16]   →(0∊⍴Y←EXAMPLEINIT 0)/0                    ⍝Check for example points[17]   X←READ 1⊃1⊃A                               ⍝Get landcover - run for all cells that are not missing[18]   R←READ 2⊃1⊃A                               ⍝and traffic grid[19]   R←0 MVREP R[20]   →(0∊⍴mask)/L0                              ⍝If mask grid supplied,[21]   Y←Y^0 MVREP READ mask                      ⍝   read it[22]  [23]  L0:Q←(1,⍴X)⍴Z←(⍴X)⍴MV[24]   →((~1∊Y)∨^/,(B,B)↓(-B,B)↓X∊MV)/L3          ⍝If block is all missing or masked, just get out now[25]  [26]   R←(R×.8)÷15×60*2                           ⍝Convert traffic to cars/second (assume 80% of traffic during 15 hours)[27]   R←1-*(-R×2×tirewidth+turtlelength)÷turtlevelocity  ⍝Road mortality model[28]   R←1-(1-R)*2                                ⍝Assume 2 crossings per year[29]  [30]   Q←B≥D←DIST 1+B×2[31]   D←Q×1⌊DY×1-÷1+*(-(D×cellsize)-D50)÷DS      ⍝Three parameter logistic distance surface[32]  [33]   I←B[34]  L1:→(((1↑⍴X)-B)<I←I+1)/L3                   ⍝For each row,[35]   BREAKCHECK[36]   J←B[37]  L2:→(((1↓⍴X)-B)<J←J+1)/L1                   ⍝   For each column,[38]   →(Y[I;J]≠1)/L2                             ⍝      If unmasked,[39]   K←((K≥1)^K≤1↑⍴X)/K←I+T←(⍳1+2×B)-B+1[40]   L←((L≥1)^L≤1↓⍴X)/L←J+T[41]  [42]   Z[I;J]←⌈/,T←D×R[K;L]                        ⍝   Worst road in homerange[43]   EXAMPLE T[44]   →L2[45]  [46]  L3:(X REMV Z) WRITE pathR,3⊃A[47]   →0[48]  [49]  what:other (box turtles)[50]  type:standard[51]  info:('land' 'traffic_raw') ('') ('boxtraffic') (SEARCH (D50,DS)÷cellsize)    ⍝input and result grids, buffer size[52]  check:CHECKVAR 'D50 DS DY tirewidth turtlelength turtlevelocity'    ∇