    ∇ Z←E PARSESUBTASK S;Q;scram[1]   ⍝Expand subtasks ⍵, suppress too many subtasks error if ⍺[2]   ⍝   Subtask list begins with one of:[3]   ⍝   range:      range of numbers, including commas and colons to indicate ranges[4]   ⍝   file:       path to text file with subtask data, one per line[5]   ⍝   function:   function that evaluates to a matrix of subtasks[6]   ⍝Global: scramblesubtasks - if 1, scramble 'em[7]   ⍝Unless '!' is included in keyword, e.g., range!:1:10 doesn't scramble subtasks no matter what[8]   ⍝B. Compton, 14 Apr 2011[9]   ⍝18-20 Dec 2012: range returns start and count[10]  ⍝14 Nov 2013: add scramblesubtasks[11]  ⍝7 Apr 2014: add ! option to prevent subtasks from being scrambled (it's okay to have 2 !!s)[12]  ⍝19 May 2014: don't look at cluster stuff (maxsubtasks, scramblesubtasks) if running in local mode; 27 May: but don't count on cluster existing![13]  ⍝10 Jul 2014: suppress the maxsubtasks error if skiptilemap (meaning we're called from DEBUG or FINDTILE)[14]  ⍝5 Sep 2014: pass local scramble subtasks flag to BLOCKREPS via global variable scram[15]  ⍝22 Jun 2016: suppress too many subtasks error if ⍺ - needed for splitsubtasks; don't blow up when using range[16]  [17]  [18]  [19]   ⍎(0=⎕NC'E')/'E←0'[20]   →(S≡Z←'')/0[21]   scram←∨/S ⎕SS '!:'                     ⍝! present?[22]   S←'.!:.:.!!:.:' TEXTREPL S[23]   →(L1,L2,L3,L4)['range:' 'file:' 'function:'⍳⊂TOLOWER (Q←S⍳':')↑S][24]  [25]  L1:Z←(⍎'.:. COLON ' TEXTREPL Q↓(MATRIFY S)[1;]),[1.5]1[26]   →L5[27]  [28]  L2:Z←NREAD Q↓S[29]   Z←(∨/Z≠' ')⌿Z←LJUST(⍴Z)↑(+/^\';'≠Z)⌽((⍴Z)⍴' '),Z←VTOM ⎕TCNL,('.',⎕TCHT,'. ') TEXTREPL Z      ⍝Semicolons mark comments[30]   →L5[31]  [32]  L3:Z←⍎Q↓S[33]   Z←⍕(2↑(⍴Z),1)⍴Z[34]   →L5[35]  [36]  L4:⎕ERROR 'Unrecognized tag in subtask: ',S[37]  [38]  L5:→(0=⎕NC'maxsubtasks')/L6         ⍝If running in cluster mode,[39]   :if 0≠⎕NC'skiptilemap'[40]      →skiptilemap/L6                 ⍝   if skipping tile map, ignore maxsubtasks[41]   :end[42]   ⎕ERROR ((~E)^maxsubtasks<1↑⍴Z)/'More than ',(⍕maxsubtasks),' subtasks (n = ',(⍕1↑⍴Z),') in task'[43]  L6:→(scram∨0=⎕NC'scramblesubtasks')/0⍝If scrambling subtasks,[44]   →(~scramblesubtasks)/0[45]   Z←Z[(1↑⍴Z)?1↑⍴Z;]                  ⍝   then do it!    ∇