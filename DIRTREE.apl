    ∇ Z←L DIRTREE P;X;I;Q[1]   ⍝Produce a formatted directory tree of ⍵ and everything below it, up to ⍺[1] levels down, suppress sizes if ⍺[2], top level if ⍺[3]=0[2]   ⍝Exclude Arc grids and mosaics[3]   ⍝Getting directory sizes slows things way down[4]   ⍝If there are more than 10 subfolders, just give number[5]   ⍝B. Compton, 28 Jan 2015[6]   [7]   [8]   [9]    ⍎(0=⎕NC'L')/'L←999 0 0'[10]   L←3↑L[11]   Z←0 0⍴''[12]   →(L[1]≤0)/0[13]   :if ~L[3] [14]      ∆GRIDINIT ''[15]      :if L[2][16]         Z←P[17]      :else[18]         Z←P,⎕TCHT,'(',(FMTSIZE 1E6×SUBSIZE P),')'[19]      :end[20]   :end[21]   [22]   X←(~IFEXISTS¨(⊂P),¨X,¨⊂'mosaicdescrip.txt')⌿X←1 SUBDIRS P       ⍝Subfolders; stop at grids or mosaics[23]   X←MIX X~⊂'System Volume Information\'[24]   I←0[25]   →(~L[3]^10<1↑⍴X)/L1[26]      Z←Z OVER '   (',(⍕1↑⍴X),' subfolders)'[27]      →L2[28]  L1:→((1↑⍴X)<I←I+1)/L2          ⍝For each subfolder,[29]   Q←P,FRDBL X[I;][30]   :if L[2][31]      Z←Z OVER ' ',' ',' ',Q[32]   :else[33]       Z←Z OVER ' ',' ',' ',Q,⎕TCHT,'(',(FMTSIZE 1E6×SUBSIZE Q),')'[34]   :end[35]   Z←Z OVER ' ',' ',' ',' ',' ',' ',((L[1]-1),L[2],1) DIRTREE P,FRDBL X[I;][36]   →L1[37]  [38]  L2:[39]   :if ~L[3][40]      Z NWRITE 'dirtree.txt'[41]      Z←'Results written to ',(TOLOWER STRIPPATH ⎕WSID),'dirtree.txt' [42]  :end    ∇