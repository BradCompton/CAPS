    ∇ Z←R READVEC F;R;W;Q;D;D_;P;I;X;E;head;H;T;B[1]   ⍝Read vector data from table or mosaic ⍵, clipping to current tile & buffer, current tile and buffer ⍺, or box ⍺[2]   ⍝Returns (data) (header columns)[3]   ⍝   ⍵ can be the name of a table, or of a table mosaic.  If both are in the[4]   ⍝     same directory, the mosaic takes precedence.[5]   ⍝   ⍺ is one of:[6]   ⍝     ∘ the box to clip to (xll, yll, xur, yur)[7]   ⍝     ∘ buffer to use with the current tile (***Note: make sure you set buffer in info line of calling metric!)[8]   ⍝     ∘ ⍳0, so current tile's buffer is used[9]   ⍝All results are clipped to the window + buffer[10]  ⍝Note: extension is stripped from table name for compatibility with old parameter files[11]  ⍝B. Compton, 28-29 Oct 2013[12]  ⍝31 Dec 2013: look for full vectormosaicdescrip when checking for existence; otherwise we get fooled by grids; faster duplicate removal; error if missing header[13]  ⍝15 Jan 2014: don't fail deleting dups in empty table[14]  ⍝17-18 and 23-24 Jan 2014: get header right[15]  [16]  [17]  [18]   ⍎(0=⎕NC'R')/'R←⍳0'[19]   :if 1≥⍴,W←R                                                ⍝If box wasn't provided,[20]      Q[3 4]←Q[1 2]+(Q←THISBLOCK)[3 4]                        ⍝   current tile[21]      W←((FINDPOINT Q[3 2]),FINDPOINT Q[1 4])                 ⍝   get box from current tile (xll, yll, xur, yur)[22]      W←W+¯1 1 ¯1 1×CELLSIZE÷2                                ⍝   we want cell corners, not midpoints[23]      W←W+¯1 ¯1 1 1×CELLSIZE×''⍴1↑R,Q[5]                      ⍝   adjust for buffer (use current tile's buffer unless one was supplied)[24]   :end[25]  [26]   F←(-+/∨\'.'=(-+/^\⌽F≠'\')↑F)↓F←pathT PATH FRDBL F          ⍝Strip .txt or other extension from table name for compatibility[27]   :if ~IFEXISTS F,'\vectormosaicdescrip.txt'                 ⍝If not a mosaic,[28]   ⎕ERROR (~IFEXISTS T)/'Vector table (or vector mosaic) ',(T←F,'.txt'),' not found'[29]      Z←TABLE T                                               ⍝   read table[30]      ⎕ERROR (0∊⍴head)/'Error: vector table ',T,' has no headers'[31]      H←',' MATRIFY TOLOWER head[32]      Z H ← W CLIPVECTOR Z H                                  ⍝   and clip to box[33]      H←MIX H[34]  ⍝    Z←((((↓⊃Z)⍳↓⊃Z)=⍳1↑⍴⊃Z)⌿⊃Z) (MIX 2⊃Z)                   ⍝   delete duplicates[35]      :if ~0∊⍴Z                                               ⍝   if table isn't empty,[36]         Z←Z[⍋(B←^⌿(⊂,0)≡¨1↑¨0⍴¨Z)/Z;]                        ⍝      sort on numeric columns[37]         Z←(∨/(B/Z)≠0⍪¯1 0↓B/Z)⌿Z                             ⍝      and remove duplicates[38]      :end[39]      Z ← Z H[40]      →0[41]   :end                                                       ⍝Else, it's a mosaic,[42]   D D_ ← VECTORMOSAICINFO F[43]   P←(⊃D[D_ COL 'extent']) (D[D_ COL 'rowsize colsize']) 1 WHICHPANE 2 2⍴W   ⍝Get list of panes[44]   P←P~(~E)/⍳⍴E←⎕FI((2×⍴E)⍴1 0)\E←⊃D[D_ COL 'panemap']        ⍝Don't look at panes that aren't in panemap[45]   :if 0∊⍴P[46]     Z←(0 0⍴0) (1 0⍴'')[47]     →0[48]   :end[49]   I←0[50]  L1:→((⍴P)<I←I+1)/L2                                         ⍝For each pane,[51]   X←0 1 TABLE (¯1↓STRIPPATH PANEPATH F (STRIP F) (P[I]) (⍴E)),'.txt'  ⍝   Read table[52]   X H ← W CLIPVECTOR X head                                  ⍝   clip to box[53]   ⍎(I=1)/'Z←(0,1↓⍴X)⍴X'[54]   Z←Z⍪X                                                      ⍝   join with result[55]   →L1[56]  [57]  L2:Z←Z[⍋(B←^⌿(⊂,0)≡¨1↑¨0⍴¨Z)/Z;]                            ⍝Sort on numeric columns[58]   :if ~0∊⍴Z[59]      Z←(∨/(B/Z)≠0⍪¯1 0↓B/Z)⌿Z                                ⍝   and remove duplicate rows (they may have come in from multiple panes)[60]   :end[61]   Z←Z H    ∇