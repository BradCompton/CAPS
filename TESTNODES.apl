    ∇ A TESTNODES S;cores;select;buffer;nodesize;slice;Q;B;C;L;head;transparent;I;X;N;D;spacing;M;E;Y;Z[1]   ⍝Create point nodes for FINDPATHS - test of wall-to-wall conductance[2]   ⍝Lays a grid of points for formation, moves to highest valued cell within tilet (favor closest to center)[3]   ⍝Creates CLII path and subpaths if necessary[4]   ⍝Parameters:[5]   ⍝   spacing     spacing for points (m)[6]   ⍝   select      name of grid with selection index (or IEI)[7]   ⍝Results (in pathQ, CLII path):[8]   ⍝   <path>\source\[9]   ⍝	   nodes            Integer grid with node # for each reserve polygon.[10]  ⍝   <path>\tables\[11]  ⍝      nodes.txt        More information about reserve nodes.   Node #, centroid-x,[12]  ⍝                       centroid-y, reserve name, priority, include, min-x, min-y, max-x, max-y.[13]  ⍝      nodevalues.txt	Values for nodes, with IEI-weighted size: mask, x, y, nodes, iei[14]  ⍝Node numbers are (tile # × 10,000) + node within tile[15]  ⍝B. Compton, 14 Jul 2015 (from MAKENODES)[16]  [17]  [18]  [19]   READPARS ME[20]   buffer←4⊃A[21]  [22]   X←READ 1⊃A                                     ⍝Read land[23]   N←0 MVREP READ GRIDNAME select                 ⍝Read selection index/IEI; missing → 0[24]   [25]   S←⌈spacing÷cellsize[26]   D←DIST S[27]   D←(⌈/,D)-D[28]   D←.0001×D÷⌈/,D                                 ⍝Favor central cell for ties    [29]  [30]   L←⌈(⍴X)÷S                                      ⍝Number of tiles[31]   M←(⍴X)↑S⌿S/L⍴⍳×/L                              ⍝Tile ids[32]    [33]   E←N+(⍴X)↑(L×⍴D)⍴↑(L[2]×(⍴D)[2])⍴¨↓D            ⍝Selection index, with tilet center bias[34]  [35]   Y←(,X),(,M),(INDICES (⍴X)⍴1),,E                ⍝List of landcover, tile id, row, column, IEI[36]   Y←(Y[;1]∊LOOK 'F_Northeastern upland forest')⌿Y⍝Only want our formation ***HARDWIRED FOR NOW***[37]   Y←Y[⍒Y[;2 5];]                                 ⍝Sort on tile id and selection index[38]   B←Y[;2]≠0,¯1↓Y[;2][39]   Y←B⌿Y                                          ⍝Highest selection index for each tile[40]   Y←Y[⍋Y[;2];]                                   ⍝Sort by tile, for neatness[41]   Z←((⍴X)⍴0) SCATR (Y[;3 4]) (⍳1↑⍴Y)             ⍝Node points in grid[42]   [43]   Z WRITEI pathQ,'source\testnodes'              ⍝Write node id grid as integer[44]   →0[45]  [46]  [47]  what:data prep[48]  type:standard[49]  info:('land') ('') ('') (1) ''      ⍝Source grid, settings table, result grid, buffer size, and include grid[50]  check:CHECKVAR 'spacing select'[51]  check:CHECKGRIDEXISTS GRIDNAME select    ∇