    ∇ X TMATAPPEND F;J;D;T[1]   ⍝Write tab-delimited numeric matrix ⍺ to existing file ⍵, optional delimiter 2⊃⍵[2]   ⍝If file doesn't exist, create it, using global head as header line[3]   ⍝B. Compton, 28 Jan 2010 (From TMATOUT)[4]   ⍝4 Aug 2010: allow passing delimiter as 2⊃⍵[5]   ⍝8 Apr 2011: make sure X is a matrix (Republicans shut down the government again...not quite)[6]   ⍝25 Jul 2011: don't trash quotes![7]   ⍝1 Aug 2011: Create file (with head) if it doesn't exist[8]   ⍝Make very sure file doesn't exist![9]   [10]  [11]  [12]   X←(¯2↑1 1,⍴X)⍴X[13]   →(0∊⍴X)/0                  ⍝If empty matrix, quit now[14]   D←⎕TCHT[15]   ⍎(2≤≡F)/'F D ← F'          ⍝If 2⊃⍵ passed, it's the delimiter[16]   →(0∊⍴X)/L3[17]   J←0[18]  L1:→((1↓⍴X)<J←J+1)/L2[19]   →(' '≠1↑0⍴⊃X[1;J])/L1[20]   X[;J]←↓VTOM '. .⍬' TEXTREPL MTOV MIX⍕¨X[;J][21]   X[;J]←'⍞',¨(FRDBL¨X[;J]),¨'⍞'[22]   →L1[23]  L2:X←0 1↓MIX,/D,¨⍕¨X[24]  L3:X←1↓MTOV X[25]   X←'.⍬. .⍞.' TEXTREPL X[26]   →(IFEXISTS F)/L4           ⍝If file doesn't exist yet,[27]   T←⎕DL 1[28]   →(IFEXISTS F)/L4[29]   T←⎕DL 2[30]   →(IFEXISTS F)/L4[31]   T←⎕DL 4[32]   →(IFEXISTS F)/L4[33]   head NWRITE F              ⍝   create it[34]  L4:(DEB HITOLOW,X) NAPPEND F    ∇