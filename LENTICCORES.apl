    ∇ A LENTICCORES S;buffer;B;X;Y;Z;C;Q;result;acores;looncores;R[1]   ⍝Make sure entire lakes are lit up in aquatic cores[2]   ⍝This needs to be done because I sometimes lapped lotic cores on top of lentic, making[3]   ⍝a mess of things. Lakes were split in polygon results, and sometimes two halves of a lake[4]   ⍝got different ids for stats.[5]   ⍝Process: read aquatic cores and landcover. Light up entire lentic body for[6]   ⍝any cores, and write result as lenticcores.[7]   ⍝B. Compton, 10 Feb 2017 (we finally got a decent snowstorm yesterday: a 10" nor'easter)[8]   [9]   [10]  [11]   READPARS ME[12]   buffer←B←4⊃A[13]  [14]   X←READ 1⊃1⊃A[15]   →(0∊⍴Y←S INCLUDE X)/0          ⍝Which cells to run for?[16]   C←READ 2⊃1⊃A                   ⍝Aquatic cores (lentic = 20, loon = 21)[17]  [18]   X←FINDPATCH X∊LOOK 'lentic'    ⍝Find lentic patches[19]   Q←UNIQUENZ (,C=20)/,X          ⍝Patches with lentic cores[20]   R←UNIQUENZ (,C=21)/,X          ⍝Patches with loon cores[21]   Z←(20×X∊Q)⌈21×X∊R              ⍝Light up entire patches with lentic (20) or loon (20) cores[22]   Z←MVREP Z (Z=0)                ⍝Everything else is missing[23]   (X REMV Z) WRITEI 3⊃A          ⍝Write results[24]   →0[25]   [26]  [27]  what:auxiliary[28]  type:standard[29]  info:('land' acores) ('') (result) (1000) 'include'      ⍝Source grid, settings table, result grid, buffer size, and include grid[30]  check:CHECKVAR 'acores result'    ∇