    ∇ R SCRIPT_QUANTILE G;E;dot;mask;A;nodata;reverse;integerize;retainzeros;includemissing;zeropush;samples;quantiles;tilesize;altmask;loop;test;noread;grids;buffer;tilemapinclude;skiptilemap;pathI[1]   ⍝Quantile scaling of grid 1⊃⍵ by strata 1↓¯1↓⍵, with mask ¯1↑⍵, tilesize 2⊃⍺; part of the LCD scripting system[2]   ⍝Arguments:[3]   ⍝   ⍺[1]            name of result grid[4]   ⍝   ⍺[2]            tilesize[5]   ⍝   ⍺[3]            options[6]   ⍝   ⍵[1...n]        names of input grids[7]   ⍝   ⍵[⍴⍵]           name of mask grid[8]   ⍝Launched by SCRIPT_LAUNCH[9]   ⍝Sets global variables and calls subroutine shared with CAPS metric QUANTILESCALE[10]  ⍝B. Compton, 18-26 Sep 2014 (from SCRIPT_ADD, quite loosely)[11]  ⍝3 Oct 2014: add options[12]  ⍝8 Feb 2016: use temporary path for strataindex[13]  [14]  [15]  [16]   framework←'caps'[17]   INIT[18]   A←(¯1↓G) 0 (1⊃R) 0[19]   altmask←(1+~0∊⍴mask)⊃(,'*') (mask←(⍴G)⊃G)      ⍝Need to use altmask to override standard mask in inputs.par.  Uses '*' if empty. nodata←⍳0[20]   nodata←⍳0[21]   reverse←0[22]   integerize←0[23]   zeropush←0[24]   retainzeros←1[25]   includemissing←1[26]   samples←1E4[27]   quantiles←100[28]   tilesize←2⊃R[29]   SCRIPTOPTIONS 2↓R[30]  [31]   pathI←1⊃⌽1⊃A           ⍝Pull out temporary path for strataindex[32]   A[1]←⊂¯1↓1⊃A[33]  [34]   ⎕←'Running QUANTILE' ⋄ FLUSH[35]   QUANTILESCALESUB A    ∇