    ∇ R SCRIPT_MAX G;X;M;block;loop;test;grids;noread;E;N;tilemapinclude;dot;skiptilemap;ffile;Z;I;Q;mask;buffer;altmask[1]   ⍝Cell-by-cell maximum of grids ⍵, tilesize 2⊃⍺; part of the LCD scripting system[2]   ⍝Arguments:[3]   ⍝   ⍺[1]            name of result grid[4]   ⍝   ⍺[2]            tilesize[5]   ⍝   ⍵[1...n]        names of input grids[6]   ⍝   ⍵[⍴⍵]           name of mask grid[7]   ⍝Launched by SCRIPT_LAUNCH[8]   ⍝B. Compton, 25 Mar 2015 (from SCRIPT_ADD)[9]   [10]  [11]  [12]   SCRIPTSETUP 'MAX'                              ⍝Set up and set several local variables[13]  L1:→(~E[N←N+1])/L4                              ⍝Repeat: read tile (skip if not in tilemap)    --- For each tile ---[14]   BREAKCHECK ⋄ DOT[15]   M←~I←0[16]   Z←⌈/⍳0[17]  L2:→((⍴X)<I←I+1)/L3                             ⍝   For each input grid,[18]   Z←Z⌈(⌈/⍳0) MVREP Q←READ I⊃X                    ⍝      Read each source grid and max with result; omit nodata cells[19]   M←M^Q=MV                                       ⍝      Result is missing if all source cells are missing[20]   →L2[21]  L3:[22]   :if ~0∊⍴mask                                   ⍝   If mask grid supplied,[23]      Z←MVREP Z ((READ mask)∊0,MV)                ⍝      read mask & apply it[24]   :end[25]   (MVREP Z M) WRITE 1⊃R                          ⍝   replace missing and write[26]  L4:→(0≠NEXTBLOCK)/L1                            ⍝Until no more tiles[27]   ⎕←''    ∇