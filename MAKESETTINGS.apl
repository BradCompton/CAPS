    ∇ MAKESETTINGS;X;where;override_metrics;override_pars[1]   ⍝Set up CAPS run to mix & rescale settings variables[2]   ⍝Call as function, not CAPS metric - this launches a CAPS run[3]   ⍝Source data:[4]   ⍝   settings\raw\<settings grids>           Raw settings variables[5]   ⍝Parameters:[6]   ⍝   model\mixsettings.par[7]   ⍝   and parameters for MIXWATER and MIXLAKES[8]   ⍝Results:[9]   ⍝   settings\mixed\<settings grids>         Settings variables, mixed, but not scaled[10]  ⍝   grids\settings\<settings grids>         Final settings variables[11]  ⍝Note: After running, check log for warnings.  Sometimes input grids have missing values for good reasons[12]  ⍝(e.g., in calcium because lithology has no data for coastal ponds), but you should make sure.[13]  ⍝B. Compton, 10 Sep and 12 Oct 2010[14]  ⍝24 May 2011: use new @wait scheme[15]  ⍝16 Sep 2011: use larger block for SCALESETTINGS[16]  ⍝19 Dec 2011: don't call SCALESETTINGS any more - this happens on the fly[17]  [18]  [19]  [20]   INIT[21]   X←1 4⍴'MIXWATER' 'yes' '*' 2000[22]   X←X⍪'MIXLAKES' 'yes' '*' 20[23]  [24]   X←X⍪4↑⊂'@wait'[25]   X←X⍪'GETRANGES' 'yes' '*' 0[26]  [27]   override_metrics←X[28]   override_pars←('.|.',⎕TCNL) TEXTREPL '[caps]|project = ''CAPS makesettings''|[mixwater]|where = ''settings''|[mixlakes]|where = ''settings''|[getranges]|where = ''settings''|[scalesettings]|where = ''settings'''[29]   CAPSx[30]  [31]   LOG 'If you''ve run for an incomplete set of settings variables, run the GETRANGES metric again (with block size = 0).'[32]   CLEAR    ∇