    ∇ Z←G MASKBITS N;M;I[1]   ⍝Apply maskbits facility to mask ⍵ for metric ⍺[2]   ⍝This facility allows metrics to use different masks, which is necessary for the CAPS Scenario Engine.[3]   ⍝To use MASKBITS, each metric (or group of metrics) is assigned an integer metric group (1-15) in maskbits.txt[4]   ⍝(format: metric<tab>group).  Then create the mask grid as the sum of 2*group for each metric.[5]   ⍝B. Compton, 15 and 21-22 Aug and 17-18 and 24 Sep 2012 and 11 Oct 2012[6]   ⍝20 May 2013: if one of the watershed metrics, look up 'watershed'[7]   [8]   [9]   [10]   Z←0<0 MVREP N[11]   →(0∊⍴maskbits)/0                                           ⍝If maskbits has been set,[12]   G←TOUPPER (1+'watershed'≡GETTYPE G)⊃(G) 'watershed'        ⍝   If one of the watershed metrics, look for 'watershed' instead[13]   M←0 0 TABLE pathI PATH maskbits,(~'.'∊maskbits)/'.txt'     ⍝   Read maskbits table[14]   →((M≡1 1⍴MV)∨(0∊⍴M)∨M≡MV)/0                                ⍝   If anything in table,[15]   I←(TOUPPER MIX M[;1]) MATIOTA G                            ⍝      and look it up in table[16]   →(I=0)/0                                                   ⍝      if not in table, we'll use entire mask[17]   Z←(⊖((M[I;2]⍴2)⊤N))[M[I;2];;]                              ⍝      Our mask is cells with this metric's bit turned on    ∇