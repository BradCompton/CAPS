    ∇  Z←B TEXTREPL A;T;R;S[1]    ⍝Replaces strings in text ⍵ as directed by ⍺[2]    ⍝ The right argument is a character vector, the text to change.[3]    ⍝ The left argument is a segmented string containing the old phrases[4]    ⍝    to search for and the new phrases to replace them with.  E.g.,[5]    ⍝    '/OLD1/NEW1/OLD2/NEW2/OLD3/NEW3'[6]    ⍝[7]    S←⎕STPTR'Z A B T R R'[8]    R←(S,2×1↑⍴A)⎕CALL TEXTREPL∆OBJ ⍝ start with a buffer 2× the arg size[9]    →(0=1↑R)/0                     ⍝ usually that will do it[10]   →(~(1↑R)∊1 3)/L1               ⍝ If buffer overflowed or WS FULL,[11]   R←(S,1↑1↓R)⎕CALL TEXTREPL∆OBJ  ⍝    try again with exact size buffer[12]   →(0=1↑R)/0                     ⍝ If that didn't do it, signal error[13]  L1:⎕ERROR(2 3 4 5 7⍳''⍴R)⊃'SYNTAX ERROR' 'WS FULL' 'RANK ERROR' 'LENGTH ERROR' 'VALUE ERROR' 'DOMAIN ERROR'[14]   ⍝ Copyright (c) 1988, 1994 by Jim Weigang    ∇