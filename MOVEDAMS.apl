    ∇ MOVEDAMS;C;C_;D;D_;max;head;Q;R;B;T[1]   ⍝Move coordinates of TNC dams to nearby CAPS dams[2]   ⍝Used for HA[3]   ⍝Inputs, in caps\ha\inputs\ [4]   ⍝CAPSdams   from caps\source\dams.shp, coords added[5]   ⍝           and saved as text file.[6]   ⍝TNCdams    from TNC, reprojected to Mass State Plane;[7]   ⍝           coords added and saved as text file.   [8]   ⍝B. Compton, 11 May 2015 (1st day of swimming was yesterday!)[9]   [10]  [11]  [12]   max←400                     ⍝Maximum matching distance[13]   [14]   C←1 ',' MATIN 'd:\caps\ha\inputs\CAPSdams.txt'[15]   C_ ← ',' MATRIFY '.".' TEXTREPL head[16]   D←1 ',' MATIN 'd:\caps\ha\inputs\TNCdams.txt'[17]   D_ ← ',' MATRIFY '.".' TEXTREPL head[18]   [19]   Q←(((C[;C_ COL 'x-coord']∘.-D[;D_ COL 'x-coord'])*2)+(C[;C_ COL 'y-coord']∘.-D[;D_ COL 'y-coord'])*2)*.5   ⍝Distances[20]   Q←(1E9×Q=0)+Q←Q×Q≤max      ⍝Only want within max[21]   R←(Q≠1E9)^Q=(⍴Q)⍴⌊⌿Q       ⍝Find closest[22]   R←R^1=+\R                  ⍝Only 1st match when ties[23]   B←∨⌿R                      ⍝Rows of TNC dams to change[24]   D[B/⍳1↑⍴D;D_ COL 'x-coord y-coord']←C[(↓[1]B/R)⍳¨1;C_ COL 'x-coord y-coord']   ⍝Replace coordinates in TNCdams[25]   [26]   head←1↓⎕TCHT MTOV D_[27]   D TMATOUT T←'d:\caps\ha\inputs\dampts.txt'[28]   ⎕←'Moved ',(⍕+/B),' TNC dams. Results are in ',T    ∇