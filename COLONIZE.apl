    ∇ A COLONIZE S;buffer;X;masking;source;result;Q;Z[1]   ⍝Colonize non-missing cells in landcover (that are masked in) with nearest cells from region grid[2]   ⍝Used to expand states, ecoregions, and HUCs into intertidal, etc.[3]   ⍝Zeros in region grid are treated as missing[4]   ⍝Parameters:[5]   ⍝   source      name of region grid to work with[6]   ⍝   result      name of result grid[7]   ⍝   buffer      specify number of cells to buffer; must be at least maximum orthogonal distance to fill[8]   ⍝   masking     yes if using mask[9]   ⍝Source:[10]  ⍝   land        landcover - fill into nonmissing cells[11]  ⍝   mask        mask - where mask is nonzero/nonmissing[12]  ⍝   region0     source region grid to expand (from region parameter + '0')[13]  ⍝Result:[14]  ⍝   region[15]  ⍝B. Compton, 14 Mar 2014[16]  [17]  [18]  [19]   READPARS ME[20]   buffer←4⊃A[21]   X←READ 1⊃1⊃A[22]   X←MV≠MVREP X (X∊(LOOKUP 1,[1.5]FRDBL¨↓',' MATRIFY exclude)[;1])     ⍝Exclude excluded types & make X binary[23]  [24]   :if masking[25]      X←X^~(READ 2⊃1⊃A)∊0,MV[26]   :end[27]  [28]   Z←0 MVREP READ 3⊃1⊃A           ⍝Read region grid. Set MV to 0.[29]  [30]  L1:Q←,(2⍴buffer)↓(-2⍴buffer)↓X^Z=0[31]   →(~∨/Q)/L9                     ⍝If any cells left to fill,[32]   ⎕←'Filling ',(FRDBL,'CI12' ⎕FMT +/Q),' missing cells...' ⋄ FLUSH[33]   Z←EXPAND Z[34]   →L1[35]  [36]  L9:⎕←'Writing ',(3⊃A),'...' ⋄ FLUSH[37]   (MVREP Z (~X)) WRITEI 3⊃A       ⍝Save result grid[38]   →0[39]  [40]  what:data prep[41]  type:standard[42]  info:('land' '*mask' (pathS PATH source)) ('') (pathS PATH result) (buffer) 'include'      ⍝Source grid, settings table, result grid, buffer size, and include grid[43]  check:CHECKVAR 'source result buffer masking'    ∇