    ∇ Z←PATIENTTIE F;H;T;E[1]   ⍝Tie APL component file ⍵ exclusively using lock server; wait patiently for success[2]   ⍝Return tie number on success, or 0 if file doesn't exist[3]   ⍝Throw error otherwise[4]   ⍝B. Compton, 17 Feb 2012[5]   ⍝25 Apr 2013: use shared tie + lock server so APL crashes don't permanently lock the file[6]   [7]   [8]   [9]    :if cluster                             ⍝If doing a cluster run,[10]      H←0 ⋄ ⍎(0≠⎕NC'thread')/'H←thread'[11]      T←F GETLOCK H                        ⍝   get a lock[12]   :end[13]   F ⎕XFSTIE Z←1+0⌈⌈/|⎕FNUMS,⎕XFNUMS       ⍝Tie the file    ∇