    ∇ D SUNWINDOW A;I;Q;C;T[1]   ⍝Give optimal window size for dem ⍺ and sun directions ⍵[2]   ⍝Assumes N-S and E-W topographic variation is representative[3]   ⍝Pads by 20% to be safe[4]   ⍝Call: dem SUNWINDOW SUNDIR 9 10 11[5]   ⍝Sets global sunwindow[6]   ⍝B. Compton, 6 Mar 2008[7]   [8]    C←CELLSIZE[9]    A←⌊/A[;2][10]  ⍝ ⎕←'Cell size: ',(⍕C),' m'            ⍝Cellsize[11]   ⎕←'Shallowest sun angle: ',2⍕A ⋄ FLUSH[12]   I←0[13]   →(A≥0)/L1[14]   ⎕←'Sun is below horizon at this date and time; no solution possible.' ⋄ FLUSH[15]   →0[16]  L1:I←I+10[17]   Q←⌈/,D MINUS (-I)⊖D                            ⍝Sun in south[18]   Q←Q,⌈/T←,D MINUS (-I)⌽D                        ⍝Sun in east[19]   Q←Q,⌈/-T                                       ⍝Sun in west[20]   Q←DEG¯3○Q÷I×C                                  ⍝Angles of worst shadows[21]   ⎕←'Distance, shadow angle (sun in E/S/W): ',⍕ROUND(I×C),Q[2 1 3] ⋄ FLUSH[22]   →(A<⌈/Q)/L1[23]   sunwindow←I×C×1.2[24]   ⎕←'Window size = ',(⍕sunwindow),' m'   ⍝Window size in m ⋄ FLUSH    ∇