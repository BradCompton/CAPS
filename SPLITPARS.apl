    ∇ SPLITPARS;metrics;X;Z;I;S;T;U;B;E;P;H;G;J[1]   ⍝Read merged.par and split it into separate files for each metric[2]   ⍝Inverse of MERGEPARS[3]   ⍝B. Compton, 23 Mar 2009 (Henri the ornery rooster is gone)[4]   ⍝23 Sep 2010: drop systems column in landcover[5]   [6]   [7]    SETPATHS[8]    pars←NREAD pathI PATH 'parameters.par'[9]   [10]   →(~IFEXISTS T←pathI PATH synonymspar)/L0               ⍝If synonyms file provided,[11]   S←1 0 TABLE T                                          ⍝   read it[12]   S[;1]←S[⌈\T\(T←~S[;1]≡¨⊂'')/⍳1↑⍴S;1]                   ⍝   fill in first column[13]   S←(0≠⊃,/⍴¨S[;2])⌿S[14]   G←((S[;1]⍳S[;1])=⍳1↑⍴S)/S[;1]                          ⍝   Synonym groups[15]   P←0 1 TABLE pathM PATH 'merged.par'[16]   H←1 0↓',' MATRIFY head[17]  L0:Z←((1↑⍴Z),1+1↑⍴H)↑Z←0 1↓TABLE landcoverpar[18]   E←0 0⍴''[19]   I←0[20]  L1:→((1↑⍴H)<I←I+1)/L2                                   ⍝For each metric,[21]   X←(~P[;I+1]∊MV,⊂'')⌿P[;1,I+1][22]   J←0[23]  L3:→((⍴G)<J←J+1)/L4                                     ⍝   For each synonym group,[24]   B←(TOUPPER X[;1])⍳TOUPPER¨(T←S[;1]≡¨G[J])/S[;2][25]   →(∨/B>1↑⍴X)/L3                                         ⍝      If whole synonym group is represented,[26]   →(~^/X[B[1];2]≡¨X[B;2])/L3                             ⍝      and all weights are the same,[27]   B←B[⍋B]                                                ⍝      to avoid scrambling[28]   X←(~(⍳1↑⍴X)∊1↓B)⌿X                                     ⍝      Replace with synonym[29]   X[B[1];1]←G[J][30]   →L3[31]  [32]  L4:head←1↓⎕TCHT MTOV 'weight' OVER 'cover type'[33]   X[;2 1] TMATOUT T←pathM PATH (FRDBL H[I;]),'X.par'[34]   ⎕←'Written ',T[35]   →L1[36]  [37]  L2:⎕←'SPLITPARS is done.'    ∇