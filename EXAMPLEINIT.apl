    ∇ Z←EXAMPLEINIT N;I;B;H;E[1]   ⍝Initialize for EXAMPLE to give intermediate results; don't zero buffer if ⍵ (typically ⍵=0)[2]   ⍝Returns mask grid (all 1s if example=⍳0, 1s for example cells, or ⍳0 if no example cells in block)[3]   ⍝Call after setting buffer, but before reading any grids[4]   ⍝Note: if sample points are near block boundaries, edgegs will get cut off.  Caveat emptor.[5]   ⍝example can be a vector of x,y,x,y,... or a matrix of x,y,other,stuff[6]   ⍝B. Compton, 24 Feb 2009[7]   ⍝21 May 2010: deal with arbitrary block reads[8]   ⍝31 Aug 2010: allow arbitrary blocks and set le from link_example (for LINKAGES)[9]   ⍝16 Aug 2011: drop link_example - it's handled within LINKAGES now[10]  ⍝10 Jun 2013: option to not zero out buffer[11]  ⍝27 Jan 2014: use SETTILE instead of noread←1 nonsense[12]  ⍝3 Oct 2017: allow example to be a matrix with 1st columns containing x,y[13]  ⍝22 Jan 2018: use block[3] for buffer, as it is guaranteed to be set[14]  [15]  [16]  [17]   E←example[18]   :if 2=⍴⍴E          ⍝If example is a matrix, take 1st 2 columns for x,y (use GETXY in parameters.par)[19]      E←E[;1 2][20]   :end [21]   [22]  L0:I←↑FINDCELL¨↓((.5×⍴,E),2)⍴E                      ⍝Convert points to cells[23]   →(0≠1↑block)/L1                                    ⍝If not running in blocks,[24]   Z←(WINDOW[2 1])⍴1                                  ⍝   Create full-size mask grid[25]   →(0∊⍴E)/L3                                         ⍝   If example is set,[26]   →L2[27]  [28]  L1:→(¯1≠1↑block)/L4                                 ⍝If using arbitrary blocks,[29]   Z←1[30]   →(0∊⍴E)/0                                          ⍝   If example is set,[31]   I←I-(⍴I)⍴block[2 3]-1+2×block[3]                   ⍝      indices[32]   Z←((2⍴1+4×block[3])⍴0) SCATR I 1[33]   Z←((1+1∊Z)⊃0 (⍴Z))⍴Z                               ⍝If no cells, return ⍳0[34]   →0[35]  [36]  L4:SETTILE                                          ⍝Else, running in regular blocks,[37]   B←THISBLOCK                                        ⍝   Get current block[38]   Z←B[3 4]⍴1                                         ⍝   Create mask grid[39]   →(0∊⍴E)/L3                                         ⍝   If example is set,[40]   I←I-(⍴I)⍴B[1 2]-1                                  ⍝      adjust for current block[41]   I←((^/I≥1)^^/I≤(⍴I)⍴B[3 4])⌿I                      ⍝      drop cells outside of block[42]  [43]  L2:Z←((⍴Z)⍴0) SCATR I 1                             ⍝Only example cells ← 1[44]  L3:Z←(N^^/1=,Z)⌈(-(2×block[3])+⍴Z)↑(block[3]+⍴Z)↑Z  ⍝Add buffer unless ⍵=1[45]   Z←((1+1∊Z)⊃0 (⍴Z))⍴Z                               ⍝If no cells, return ⍳0    ∇