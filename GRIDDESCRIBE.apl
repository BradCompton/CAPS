    ∇ Z←S GRIDDESCRIBE G;D;D_;I;Q;T;O;B;N;M;Q_[1]   ⍝Return info for named grid ⍵ - high-level version. Only return statistics if ⍺[1]; suppress errors if ⍺[2]; no local gridinfo caching if ⍺[3][2]   ⍝Returns:[3]   ⍝   Z[⍳4]   cols, rows, xll, yll[4]   ⍝   Z[5]    cellsize[5]   ⍝   Z[6]    nodata[6]   ⍝   Z[7]    cell type (1 = integer, 2 = real)[7]   ⍝   Z[8-11] minimum value in grid, maximum, mean, and standard deviation[8]   ⍝   Z[12]   mosaic (1 if mosaic)[9]   ⍝B. Compton, 13 Sep 2013[10]  ⍝7 Oct 2013: add mosaic flag[11]  ⍝21 Oct 2013: protect against rare collisions using local grid server to do ∆GRIDDESCRIBE: try again a few times, then use remote grid server. Check caching date right.[12]  ⍝5 Nov 2013: localize stuff from GETPARS[13]  ⍝14 Nov 2013: use the correct remote gridserver if local ∆GRIDDESCRIBE fails[14]  ⍝8-9 Dec 2013: suppress caching if ⍺[3] or if global caching = 0[15]  ⍝15 Dec 2013: get a lock before reading mosaicdescrip.txt - otherwise, it sometimes isn't readable. 16 Dec: now it happens in MOSAICINFO[16]  ⍝28 Jan 2014: fix a handful of bugs (3) in mosaic stats; 28 Feb: and make sure pane names are short![17]  ⍝24 Apr 2014: never get grid description from cache[18]  ⍝28 Apr 2014: add local gridinfo caching; ⍺[3] now suppresses this[19]  ⍝8 May 2014: always go to disk when getting stats (leaving for the Little J in a little while...)[20]  ⍝21 Nov 2014: lowercase names in gridinfo[21]  [22]  [23]  [24]   ⍎(0=⎕NC'S')/'S←0 0 0'[25]   S←3↑S[26]  [27]   →((~S[1])^(~S[3])^~0≡Z←⊃(gridinfo[;2],0)[gridinfo[;1]⍳⊂TOLOWER G])/0       ⍝If grid is in local gridinfo cache and caching isn't suppressed and not asking for stats, return info[28]  [29]   Q Q_ ← (0,S[3]) MOSAICINFO G←FRDBL G[30]   :if ~0∊⍴Q                                                  ⍝If it's a mosaic,[31]      TRACK '   [GRIDDESCRIBE ',G,' from mosaic]'[32]      Z←(⊃Q[Q_ COL 'extent']),(4⍴MV),1[33]      :if S[1][34]         Z[8 9]←(⌊/⍳0),⌈/⍳0                                   ⍝   if we want stats,[35]         B←⎕FI((2×⍴⊃Q[Q_ COL 'panemap'])⍴1 0)\⊃Q[Q_ COL 'panemap'][36]         N←FRDBL (13-D←1+⌊10⍟⍴B)↑⊃Q[Q_ COL 'name']            ⍝      Base name for panes[37]         M←'ZI',⍕D                                            ⍝      and number format[38]         :for I :in ⍳+/B                                      ⍝      For each pane,[39]            T←1 GRIDDESCRIBE G,T,T←'\',N,,M ⎕FMT (B/⍳⍴B)[I]   ⍝         get grid description of pane[40]            Z[8]←Z[8]⌊T[8]                                    ⍝         take min and max[41]            Z[9]←Z[9]⌈T[9][42]         :end[43]      :end[44]      →L9[45]   :end                                                       ⍝else,[46]  [47]  L1:O←activeconnection                                       ⍝   Switch to local grid server[48]   SETCACHE 1[49]   SETCONNECTION O[1][50]   ACTIVATECONNECTION[51]   TRACK '   [GRIDDESCRIBE ',G,' from local grid server]'[52]   Z←1 ∆GRIDDESCRIBE G                                        ⍝   Describe grid, suppressing errors[53]   :if 0∊⍴Z                                                   ⍝   If an empty result, we may have a collision (even if errors should be suppressed),[54]      →(~0∊⍴Z←1 ∆GRIDDESCRIBE G)/L2                           ⍝      try again[55]      T←⎕DL 0.2                                               ⍝      then wait 0.2 sec and try again[56]      →(~0∊⍴Z←1 ∆GRIDDESCRIBE G)/L2[57]      T←⎕DL 1                                                 ⍝      now wait 1 sec and try again[58]      →(~0∊⍴Z←1 ∆GRIDDESCRIBE G)/L2[59]  [60]      SETCONNECTION FINDCONNECTION referencewindow (STRIPDRIVE G) ⍝      Total failure; must use remote server - activate the right grid server![61]      SETCACHE 0[62]      ACTIVATECONNECTION[63]      TRACK '   [*** GRIDDESCRIBE ',G,' from remote grid server ***]'[64]      Z←S[2] ∆GRIDDESCRIBE G                                  ⍝      do ∆GRIDDESCRIBE on the remove server, and throw an error if it fails[65]   :end[66]  [67]  L2:SETCACHE O[2]                                            ⍝   and switch back[68]   ACTIVATECONNECTION[69]   :if ~O[3]∊0,MV[70]      SETCONNECTION O[3][71]   :end[72]   :if ~O[4]∊0,MV[73]      SETCACHE O[4][74]   :end[75]  [76]  L9:I←gridinfo[;1]⍳⊂TOLOWER G                                ⍝Save info in local gridinfo cache[77]   :if I>1↑⍴gridinfo[78]      gridinfo←gridinfo⍪(TOLOWER G) 0 0[79]   :end[80]   gridinfo[I;2]←⊂Z    ∇