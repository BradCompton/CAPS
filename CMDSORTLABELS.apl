    ∇  CMDSORTLABELS A;F;I;C;M;B;R;T;P[1]    ⍝Sorts labels of the form 'L#' in functions ⍵[2]    ⍝ Syntax:  ]SORTLABELS  functions   /L=label prefix (e.g., L)[3]    ⍝ Sorts labels that have a the specified prefix followed by a digit[4]    ⍝   (which may be followed by any text, as in L15, L15B, etc.)[5]    ⍝   but does not change any other labels.[6]   [7]    ⍝ * * *  STILL NEEDS TO HAVE VARIABLE NAMES PREFIXED WITH ⍙[8]   [9]    ⍝[10]   P←'L'⍝default label prefix[11]   →(~1∊B←A ⎕SS'/L')/⍙2⍝If /L= option used,[12]   P←(1+B⍳1)↓A[13]   P←(¯1+P⍳'/')↑P[14]   P←FRDBL(P⍳'=')↓P⍝   get the label prefix[15]  ⍙2:P←,P[16]   F←MATRIFY(¯1+A⍳'/')↑A⍝function names[17]   I←0[18]  ⍙1:→((1↑⍴F)<I←I+1)/⍙3⍝Loop for each function[19]   ⍞←F[I;][20]   C←⎕CR F[I;][21]   M←(∨/C=':')⌿C ⍝   lines which may be labelled[22]   B←,^\M≠':' ⋄ M←(⍴M)⍴B\B/,M⍝   text before first colon[23]   M←MATRIFY,' ',(^/M∊' ','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_∆⍙0123456789')⌿M ⍝   the labels[24]   →((M MATIOTA M)^.=⍳1↑⍴M)/⍙6[25]   ⎕←' -  * * *  Has duplicate labels; sorting bypassed.  * * *'[26]   →⍙1[27]  ⍙6:M←((⍴M)⌈0,1+⍴P)↑M[28]   M←(M[;⍳⍴P]^.=P)⌿M⍝   labels with the right prefix[29]   M←(M[;1+''⍴⍴P]∊'0123456789')⌿M ⍝   followed by a digit[30]   →(0≠1↑⍴M)/⍙4[31]   ⎕←' - has no labels' ⋄ →⍙1[32]  ⍙4:B←''⍴⍴M[33]   R←,'/',M,'/',((B,⍴P)⍴P),⍕(B,1)⍴⍳B⍝   old and new labels[34]   C←(R~' ')TEXTREPL MTOV C⍝   make the changes[35]   T←⎕FX VTOM C[36]   →(T≡F[I;]~' ')/⍙5[37]   ⎕←' -  * * *  Unable to redefine this function.  * * *'[38]   →⍙1[39]  ⍙5:⎕←' - ',(⍕1↑⍴M),' label',((1≠1↑⍴M)/'s'),' sorted'[40]   →⍙1[41]  ⍙3:[42]  [43]  ⍝∇ Copyright (c) 1991 by Jim Weigang.  All rights reserved.[44]  ⍝∇ Unauthorized reproduction prohibited.    ∇