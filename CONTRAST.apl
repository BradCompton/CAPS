    ∇ A CONTRAST S;buffer;B;X;Z;Y;I;J;U;M;sd;sdt;R;Q;head;sample[1]   ⍝Write grid of ecological distance from each focal cell (points in example = ) to all others in block[2]   ⍝Options:[3]   ⍝   sample          number of points to write to contrast.par[4]   ⍝Results:[5]   ⍝   results\contrast#       Contrast grid for point #[6]   ⍝   results\contrast.txt    Table of contrasts, for plot.contrast()[7]   ⍝B. Compton, 19 Nov 2010[8]   ⍝18 Feb 2011: Always set anthro settings to zero for focal cell[9]   ⍝31 Oct 2011: use ecodistpower and other changes for new SETTINGS (18" of snow Oct 29-30!)[10]  ⍝4 Nov 2011: set up for plot.contrast(); use ECODIST and drop ecodistpower[11]  [12]  [13]  [14]   READPARS ME[15]   buffer←B←0[16]   X←READ 1⊃A[17]   →(0∊⍴Y←S INCLUDE X)/0                              ⍝Which cells to run for?[18]   sd sdt ← SETTINGS (2⊃A) 'anthro1 anthro2' 'dist'   ⍝Get ecological settings and tables for distance[19]   I←M←0[20]   Q←((×/⍴X),+/,Y)⍴0[21]  [22]  L1:→(((1↑⍴X)-B)<I←I+1)/L3                           ⍝For each row,[23]   BREAKCHECK[24]   →(~∨/Y[I;])/L1                                     ⍝   If empty row, skip it[25]   J←B[26]  L2:→(((1↓⍴X)-B)<J←J+1)/L1                           ⍝   For each column,[27]   →(~Y[I;J])/L2                                      ⍝      If we're doing this cell,[28]   R←(sdt[;2]×sd[;I;J]) ECODIST sd                    ⍝      Contrast values for focal cell I,J.  Focal cell is always 0 for anthro settings.[29]   Z←0 MVREP R (X=MV)[30]   (X REMV Z) WRITE pathR PATH 'contrast',⍕M←M+1[31]   LOG 'Example point ',(⍕M),' written.'[32]   ⎕←'Distribution of contrasts:'[33]   ⎕←HIST R[34]   ⎕←''[35]   Q[;M]←,X REMV Z[36]   →L2[37]  [38]  L3:Q←(^/Q≠MV)⌿Q←((,X),Q)[39]   Q←Q[sample?1↑⍴Q;][40]   head←'landcover',⊃,/⎕TCHT,¨(⊂'contrast'),¨⍕¨⍳M[41]   Q TMATOUT pathR PATH 'contrast.txt'[42]   →0[43]  [44]  [45]  what:auxiliary[46]  type:standard[47]  info:('land') ('settings') ('') (0) 'include'       ⍝Source grid, settings table, result grid, buffer size, and include grid[48]  check:CHECKVAR 'sample'    ∇