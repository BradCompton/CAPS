    ∇ Z←QUICKPOST X;M;W;head;C;Q;B;warnings;names;G;I;J;T;K;O;L;R;missing;Y;V[1]   ⍝Do quick benchmark-based CAPS rescaling for masked tiles that fit in memory; return IEI[2]   ⍝This is for CAPS Scenario Builder, when alternate grid has natural communities[3]   ⍝Arguments:[4]   ⍝   ⍵[1]            landcover(alt)[5]   ⍝   ⍵[2]            mask[6]   ⍝   ⍵[3]            matrix of names of results(alt)[7]   ⍝Parameters:[8]   ⍝   threshold       metric contribution threshold, from [scenarios][9]   ⍝Source:[10]  ⍝   model\postmodel.par[11]  ⍝   results\<metrics>[12]  ⍝B. Compton, 3-4 Jun 2013 (from POSTSCALE)[13]  ⍝24 Jun 2013: fix IEI rescaling[14]  [15]  [16]  [17]   X B R ← X                                  ⍝Landcover grid and mask[18]   X←X×B[19]  [20]  ⍝Do setup, from POSTSOURCE[21]   W←TABLE pathI PATH 'postmodel.par'         ⍝Community × metric table of weights[22]   M←TOUPPER FRDBL¨1↓↓',' MATRIFY head        ⍝Metrics[23]   C←W[;1]                                    ⍝Communities[24]   W←W÷⍉(⌽⍴W)⍴+/W←0⌈0 1↓W                     ⍝Weights in terms of proportion.  All weights forced to ≥0[25]   W←threshold×⌊W÷threshold                   ⍝Ignore metrics representing <0.1% of a community's model[26]  [27]   warnings←''[28]   Q←1 LOOKUP (⍳⍴C),[1.5]C                    ⍝Look up communities using synonyms[29]   names←landcover[landcover[;1]⍳Q[;1];2]     ⍝Community names corresponding to weights[30]   W←Q[;1],W[Q[;2];]                          ⍝Weights[31]   W←(T←1,~^⌿0=0 1↓W)/W                       ⍝Drop any metrics with no weight in any models[32]   M←(1↓T)/M                                  ⍝List of all metrics[33]   R←((⊂path PATH source),¨M),[1.5](R,⊂'')[(TOUPPER¨STRIP¨R)⍳M]   ⍝Metric grid locations (use base where alt wasn't run)[34]   R←((⊃,/0≠⍴¨R[;2])⌽R)[;1][35]   missing←0 3⍴'' '' 0[36]  [37]   C←MATIN (benchpath,(0∊⍴benchpath)/pathE) PATH 'benchmark1.csv'    ⍝Read benchmark file (from CSB\model\)[38]   LOG '      QUICKPOST: Post-processing ',(⍕+/,B),' cells for alternate scenario'[39]  [40]   Z←(+/G←,X∊W[;1])⍴0                         ⍝Result, target community cells only[41]   J←0[42]  L2:→((⍴M)<J←J+1)/L3                         ⍝For each metric,[43]   BREAKCHECK[44]  [45]   K←(L←,X∊(O←O\((O←0≠W[;J+1])/W[;1])∊X)/W[;1])/,X⍝   Run only for cells we have to[46]   →(0∊⍴K)/L2                                 ⍝   If no communities for this metric, bail out[47]   Y←L/,READ J⊃R                              ⍝   Read metric result[48]   V←'negative'≡GETDIRECTION J⊃M              ⍝   Reverse metric?[49]   Y←RESCALE_METRICS K Y (O/W[;1]) (((TOUPPER C[;2])≡¨TOUPPER¨M[J])⌿C) V 1   ⍝   rescale it[50]   Z←Z+(G/L)\Y×W[W[;1]⍳K;J+1]                 ⍝   weight metric and add to running IEI[51]   →L2[52]  [53]  L3: C←MATIN (benchpath,(0∊⍴benchpath)/pathE) PATH 'benchmark2.csv' ⍝Read IEI benchmark file[54]   Z←RESCALE_METRICS (G/,X) Z (W[;1]) C 0 0   ⍝Rescale it[55]   Z←(⍴X)⍴(MV×~G)+G\Z                         ⍝And puff it back up    ∇