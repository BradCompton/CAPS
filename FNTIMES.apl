    ∇ Z←C FNTIMES X;Q;S;A[1]   ⍝Report percent of time spent in each function ⍵; report absolute times if ⍺[1][2]   ⍝If ⍵ = list of names, give exclusive percent for each named function (with %>0)[3]   ⍝If ⍵ = '', use all functions[4]   ⍝If ⍵ = single function name, give percent for each line[5]   ⍝⍺[1] is multiplier on absolute times (0 = use relative times)[6]   ⍝For multiple functions, time excludes subroutines unless ⍺[2]=1*[7]   ⍝   *Except for functions calling assembly language or C++ subroutines, which are always included in times[8]   ⍝For single function, time includes subroutines unless ⍺[2]=2[9]   ⍝Set timing first with 1 ⎕MF function or 1 ⎕MF ⎕NL 3[10]  ⍝B. Compton, 28 Feb 2006[11]  ⍝20 Sep 2010: Clarification and exclude ⎕MF[1;2][12]  ⍝14 Oct 2010: C++ and assembly subroutines always get included for calling functions when reporting for multiple functions[13]  ⍝14 Sep 2012: add absolute time option[14]  [15]  [16]  [17]   ⍎(0∊⍴X)/'X←⎕NL 3'[18]   X←MATRIFY X[19]   →(1=1↑⍴X)/L1               ⍝If called for multiple functions,[20]   ⍎(0=⎕NC'C')/'C←0 2'[21]   A C ← 2↑C,2[22]   S←((1∊¨(⎕VR¨↓⎕NL 3) ⎕SS¨⊂'⎕NA')∨1∊¨(⎕VR¨↓⎕NL 3) ⎕SS¨⊂'⎕CALL')⌿⎕NL 3[23]   C←1⌈((1↑⍴X)⍴C)-(↓X)∊(↓S)[24]   Q←+/¨1↓¨C⌷[2]¨0⌈⎕MF¨↓X[25]   →(0=+/Q)/0[26]   :if A≠0[27]      Q←⌊.5+A×Q÷1E10[28]   :else[29]      Q←⌊.5+100×Q÷+/Q[30]   :endif[31]   Z←(Q,X)[⍒Q;][32]   Z←⍕(Z[;1]>0)⌿Z[33]   →(A=0)/0[34]   Z←Z OVER '' OVER 'Total: ',⍕+/Q[35]   →0[36]  [37]  L1:⍎(0=⎕NC'C')/'C←0 1'      ⍝Else, called for single function,[38]   A C ← 2↑C,1[39]   →(^/0=,Q←0⌈⎕MF X)/0[40]   :if A≠0[41]      Q←⌊.5+A×1↓Q[;C]÷1E10[42]   :else[43]      Q←⌊.5+100×Q÷+/Q←1↓Q[;C][44]   :endif[45]   Z←('BI3' ⎕FMT 0,Q,0),' ',¯1 0↓VTOM ⎕TCNL,⎕VR,X[46]   Z←((1↑⍴Z),⎕PW⌊1↓⍴Z)↑Z[47]   →(A=0)/0[48]   Z←Z OVER '' OVER 'Total: ',⍕+/Q    ∇