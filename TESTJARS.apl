    ∇ TESTJARS N;I;fail;W;S;A;Q;O;F;X;Y;Z[1]   ⍝Test READBLOCK/WRITEBLOCK heavily[2]   ⍝   2500 1500 MAKEMOSAIC 'd:\caps\grids\land' 'd:\caps\mosaics\land'       ⍝Do this first[3]   ⍝B. Compton, 15 Oct 2013. Government still shut down, debt ceiling this week...[4]   [5]   [6]   [7]   [8]    A←'d:\caps\mosaics\land'       ⍝Test mosaic[9]    O←'d:\caps\grids\land'         ⍝Original grid[10]   Q←'d:\caps\mosaics\jartest'    ⍝Output grid[11]  [12]  [13]  ⍝→L0     ⍝If already initialized[14]  [15]   LOCKINIT 'glyptemys'[16]   CLEANUP[17]   pathA←'d:\anthill\'[18]   LAUNCHSERVERS 0[19]  [20]   1 GRIDINIT 'glyptemys' 3339[21]   SETWINDOW 'd:\caps\grids\land'[22]  [23]   MOSAICINIT 'd:\caps\mosaics\land' 'd:\anthill\gridservers.txt'[24]  [25]  [26]  L0:S←⌽2↑GRIDDESCRIBE A                                      ⍝size of target grid[27]  [28]   fail←0[29]   I←0[30]  L1:→(N<I←I+1)/0                                             ⍝For each test,[31]   F←2⍴0[32]   W←?S,2⍴1000                                                ⍝   block size[33]   ⎕←'Test #',(⍕I),': window = ',(1↓⊃,/',',¨FRDBL¨⍕¨W),'...' ⋄ FLUSH[34]   SETCONNECTION 1[35]   ACTIVATECONNECTION[36]   ⎕←' <Reading block from original grid>' ⋄ FLUSH[37]   X←READBLOCK (⊂O),W                                         ⍝   read the block from the original grid[38]   ⎕←' <Writing block to a full grid>' ⋄ FLUSH[39]   X WRITEBLOCK (⊂Q,'xx'),W,4⍴0                               ⍝   write the block to a full grid[40]   →(^/,X=MV)/L2[41]   ⎕←' <Reading block from a mosaic>' ⋄ FLUSH[42]   Y←READBLOCK (⊂A),W                                         ⍝   read the block from the mosaic[43]   F[1]←~X≡Y[44]   ⎕←' <Writing block to a mosaic>' ⋄ FLUSH[45]   X WRITEBLOCK (⊂Q),W,(3⍴0),1                                ⍝   write the block to a new mosaic[46]   ⎕←' <Reading block from the mosaic we just wrote>' ⋄ FLUSH[47]   Z←READBLOCK (⊂Q),W,0,1                                     ⍝   and read from the new mosaic (don't bother to cache this)[48]   F[2]←~X≡Z[49]   fail←fail+∨/F[50]   ⎕←((1++/F)⊃'SUCCESS' 'FAILURE'),(⍕F/'(READBLOCK failure)' '(WRITEBLOCK failure)'),' - ',(⍕fail),' failures so far from ',(⍕I),' tests.'[51]   →L1[52]  L2:⎕←'(No data in block. Trying again.)'[53]   I←I-1[54]   →L1    ∇