    ∇ LOCALRUN X;T;J;Y;⎕ALX;⎕SA;Q;warn;warnings;fn;null;I[1]   ⍝Run CAPS commands (and reps) ⍵ locally[2]   ⍝B. Compton, 23 May 2011, from RUN[3]   [4]   [5]   [6]    ⎕SA←''[7]    ⎕ALX←'STOP'[8]    null←⍳0[9]    SETPATHS[10]   →(IFEXISTS pathP)/L1           ⍝If parameter path doesn't exist yet,[11]   ⎕MKDIR ¯1↓pathP[12]  L1:(pathP PATH 'caps.log') LOG '--- Starting CAPS run, ',NOW,' ---'[13]   SETBREAK[14]   warn←1[15]   warnings←0 0⍴''[16]   fn←'LOCALRUN'[17]  [18]   X←(~(⊂'wait')≡¨TOLOWER¨X[;1])⌿X⍝No need to mess with WAITs in local runs[19]  [20]   I←0[21]  L2:→((1↑⍴X)<I←I+1)/L5           ⍝For each metric,[22]   Y←⊃X[I;1]                      ⍝   Command[23]   J←0[24]   →(0∊⍴X[I;2])/L3                ⍝   If need to expand reps,[25]   Y←PARSESUBTASK ⊃X[I;2]         ⍝      Expand them[26]   Y←MIX (⍕¨↓Y),¨' ',¨X[I;1]      ⍝      and make calls[27]  [28]  L3:→((1↑⍴Y)<J←J+1)/L2           ⍝   For each metric or rep,[29]   BREAKCHECK[30]   T←Y[J;][31]   →(Q←'.'=1⍴T)/L4                ⍝If first character of line is ., run silently[32]  L4:⍎Q↓T[33]   →L3[34]  [35]  L5:CAPSEND[36]   ∆CLEANUP    ∇