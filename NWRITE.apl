    ∇ X NWRITE F;N;I;T;D[1]   ⍝Write ⍺ to dos file ⍵[2]   ⍝11 Apr 2011: This version puts newlines at the end, not beginning, to be compatible with R[3]   ⍝2 May 2011: try again a few times if error[4]   ⍝29 Nov 2012: if text is empty string, don't write newline at end[5]   ⍝10 Jul 2014: create directory if it doesn't exist[6]   ⍝19 Sep 2014: don't create directory--it can lead to double-locking the Anthill directory (and possibly others)![7]   [8]   [9]   [10]   I←0[11]   →(1≥⍴⍴X)/L1[12]   X←1↓MTOV X[13]  L1:T←⎕DL ¯1+2*¯1+I←I+1[14]  [15]  :Try[16]   NDROP F[17]   F ⎕XNCREATE N←-1+0⌈⌈/|⎕XNNUMS[18]   X←('/',⎕TCNL,'/',⎕TCNL,⎕TCLF) TEXTREPL X  ⍝Use crlf for compatability[19]   X←X,(~0∊⍴X)/⎕TCNL,⎕TCLF[20]   X ⎕NAPPEND N[21]   ⎕NUNTIE N[22]  [23]  :CatchAll[24]   ⍎(0=⎕NC'tries')/'tries←1'[25]   →(I<tries)/L1                    ⍝Try again tries times[26]   ⎕ERROR ⎕DM[27]  [28]  :EndTry    ∇