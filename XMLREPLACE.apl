    ∇ V XMLREPLACE P;I;J[1]   ⍝Replace tag(s) ⍵ with new value ⍺ in xml[2]   ⍝Refer to xml tag strings as tag1.tag2.tag3[3]   ⍝Case-sensitive[4]   ⍝B. Compton, 8 Nov 2007[5]   [6]   [7]    I←⊃,/XMLFIND¨↓P[8]    ⎕ERROR (0∊⍴I)/'XML tag(s) not found'[9]   ⍝ ⎕←'Replacing ',(⍕⍴I),' items.'[10]   V←⍕V[11]   J←0[12]  L0:→((⍴I)<J←J+1)/0                                                      ⍝For each found item,[13]   xml←((index[I[J];3]-1)↑xml),V,(index[I[J];4]-1)↓xml[14]   →(('<'∊V)∨(0=⍴⊃index[I[J];2])^≠/index[I[J];3 4])/L1                    ⍝   If simply replacing a value,[15]   index[I[J];2]←⊂V                                                       ⍝      update index[16]   index[;3 4]←index[;3 4]+(index[;3 4]>index[I[J];3])×(⍴V)--/index[I[J];4 3][17]   →L0                                                                    ⍝   Else, replacing tags or inserting new ones[18]  L1:index←XMLINDEX 0                                                     ⍝      reindex[19]   →L0    ∇