    ∇ C QGIS M;X;A;B;I;V;head;N[1]   ⍝Generate QGIS color map file for values ⍵, colors ⍺[2]   ⍝⍵ = max or min max[3]   ⍝⍺ = 'color' 'color file' n-steps (default = 'green' 'c:\qgis\colormap.txt' 100)[4]   ⍝if 1⊃⍺ = 'random', generate random colors for classified grids[5]   ⍝Because they just don't have it right yet[6]   ⍝B. Compton, 7 Nov 2011[7]   ⍝22 Nov 2011: do random colors[8]   ⍝27 Jan 2012: ⍺[3] gives number of colors to produce[9]   [10]  [11]  [12]   ⍎(0=⎕NC'C')/'C←''green'''[13]   ⍎(1≥≡C)/'C←⊂C'[14]   C←(2↑C,⊂'colormap.txt'),1↑2↓3↑C,100 100[15]   C[2]←⊂'C:\Program Files (x86)\Quantum GIS Wroclaw\' PATH (TOLOWER 2⊃C),(~'.'∊2⊃C)/'.txt'[16]   M←¯2↑0,M[17]  [18]   →('random'≡TOLOWER 1⊃C)/L1             ⍝If using color gradient,[19]   V←M[1]+0,(⍳C[3])×(M[2]-M[1])÷C[3]      ⍝   Values[20]   V[⍴V]←9999⌈C[3]×M[2]                   ⍝   Highest color for reasonable max[21]   A←((C[3]-N)⍴255),⌽⌊128+0,(255÷C[3])×⍳N←¯1+⌊C[3]÷2            ⍝   On-color[22]   B←⌽⌊1,(255÷C[3])×⍳C[3]                        ⍝   Off-colors[23]   I←-'red' 'green' 'blue'⍳⊂TOLOWER 1⊃C   ⍝   Index into color position[24]   X←V,((I⌽B,B,[1.5]A),255),⊂''[25]   →L2                                    ⍝Else,[26]  L1:X←(M[1]-1)↓⍳M[2][27]   X←(0 255 255 255 255 '')⍪(X,(¯1+?((⍴X),3)⍴256),255),⊂''[28]   →L2[29]  [30]  L2:head←'# QGIS Generated Color Map Export File',⎕TCNL,'INTERPOLATION:DISCRETE'[31]   X CMATOUT 2⊃C[32]   ⎕←'QGIS color map file written to ',2⊃C    ∇