    ∇ Z←TESTQSHED W;X;F;R;Q;O;P[1]   ⍝Test watershed metrics for generated watershed of size ⍵[1], shape ⍵[2], and single point source at distance ⍵[3] (in cells)[2]   ⍝If ⍵[3] = ¯1, point source is at watershed edge, if ¯2, it's at top left corner[3]   ⍝Returns metric for each cell, plus global outflow[4]   ⍝B. Compton, 22 Sep 2009 (Autumnal equinox)[5]   [6]   [7]    F O ← GENSHED W[1 2]                       ⍝Generate watershed[8]    X←R←(⍴F)⍴1                                 ⍝null landcover, resistance always = 1[9]    Q←(1,⍴F)⍴0[10]   P←(1+|0⌊W[3])⊃(O-W[3],0) (1,O[2]) (1 1)    ⍝at top watershed edge if ¯1; top left corner if ¯2[11]   →(P[1]<1)/L1                               ⍝If point falls outside of wathershed, we'll just return 0s[12]   Q[1;P[1];P[2]]←1                           ⍝point-source ⍵[3] cells up from outlet[13]  [14]  ⍝ Q←(×/⍴F)⍴0 ⋄ Q[(⌊.5+.1××/⍴F)?×/⍴F]←1 ⋄ Q←(1,⍴F)⍴Q   ⍝10% = point source[15]  ⍝ Q[1;⍳5;]←1   ⍝Monkey with point source to fill half[16]  L1:F←0,0⍪(F⍪0),0[17]   Z ← X F R Q QSHED outflow←O                ⍝Run watershed metric    ∇