    ∇ A REGIONTILE S;buffer;G;regionmaps;I;Z;X;regionpath[1]   ⍝Given list of regionmaps, build regiontilemap<tilesize>.txt[2]   ⍝This is used for regional post processing in CAPS[3]   ⍝Parameters:[4]   ⍝   regionpath      shared path to regionmaps[5]   ⍝   regionmaps      list of regionmap grids, space-delimited[6]   ⍝Source:[7]   ⍝   <region grids>  grids with integer regions, 1...n[8]   ⍝Result:[9]   ⍝   pathT,regiontilemap<tilesize>.txt[10]  ⍝Run this before launching REGIONALPOST.  It won't need to be rerun unless[11]  ⍝the region grids change or you decide to use a different tile size for[12]  ⍝post-processing.[13]  ⍝B. Compton, 14-17 Mar 2014[14]  ⍝7 Apr 2014: results to tables path, not post path...that was too much of a pain[15]  [16]  [17]  [18]   READPARS ME[19]   buffer←4⊃A[20]   G←MATRIFY regionmaps[21]   regionpath←(1+0∊⍴regionpath)⊃regionpath pathS[22]  [23]   Z←((1↑⍴G),4)⍴0[24]   I←0[25]  L1:→((1↑⍴G)<I←I+1)/L2       ⍝For each region map,[26]   X←,READ GRIDNAME regionpath PATH G[I;]   ⍝   read region grid[27]   X←(~X∊0,MV)/X[28]   X←X[⍋X][29]   X←(X≠0,¯1↓X)/X             ⍝   Unique regions[30]   Z[I;]←(⊂TOLOWER FRDBL STRIP G[I;]),block[4 5],⊂'R',1↓⊃,/',',¨⍕¨X[31]   →L1[32]  [33]  L2:Z LOCKWRITE pathT,'regiontilemap',(⍕block[1]),'.txt'[34]   →0[35]  [36]  [37]  what:data prep[38]  type:standard[39]  init:head←1↓⎕TCHT MTOV MATRIFY 'regionmap row col regions' ⋄ (0 0⍴'') TMATOUT pathT,'regiontilemap',(⍕tilesize),'.txt'[40]  info:('') ('') ('') 0 ''      ⍝Source grid, settings table, result grid, buffer size, and include grid[41]  check:CHECKVAR 'regionpath regionmaps'    ∇